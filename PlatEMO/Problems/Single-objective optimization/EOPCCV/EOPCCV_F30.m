classdef EOPCCV_F30 < PROBLEM
% <2022> <single> <real/label> <expensive/none>
% Expensive optimization problems with continuous and categorical variables

%------------------------------- Reference --------------------------------
% J. Liu, Y. Wang, G. Sun, and T. Pang. Multisurrogate-assisted ant colony
% optimization for expensive optimization problems with continuous and
% categorical variables. IEEE Transactions on Cybernetics, 2022, 52(11):
% 11348-11361.
%------------------------------- Copyright --------------------------------
% Copyright (c) 2026 BIMK Group. You are free to use the PlatEMO for
% research purposes. All publications which use this platform or any code
% in the platform should acknowledge the use of "PlatEMO" and reference "Ye
% Tian, Ran Cheng, Xingyi Zhang, and Yaochu Jin, PlatEMO: A MATLAB platform
% for evolutionary multi-objective optimization [educational forum], IEEE
% Computational Intelligence Magazine, 2017, 12(4): 73-87".
%--------------------------------------------------------------------------

% This function is written by Jiao Liu (email: jiao.liu@ntu.edu.sg)

    properties
        Dr;     % Number of continuous variables
        Dc;     % Number of categorical variables
        len_c;  % length of values of categorical variables
    end
    methods
        %% Default settings of the problem
        function Setting(obj)
            obj.Dr       = 5;
            obj.Dc       = 5;
            obj.M        = 1;
            obj.D        = obj.Dr + obj.Dc; 
            obj.lower    = [-100*ones(1,obj.Dr),ones(1,obj.Dc)];
            obj.upper    = [100*ones(1,obj.Dr),10*ones(1,obj.Dc)];
            obj.len_c    = 10*ones(1,obj.Dc);
            obj.encoding = [zeros(1,obj.Dr),zeros(1,obj.Dc)+3];
        end
        %% Calculate objective values
        function PopObj = CalObj(obj,PopDec)
            load elliptic_M_D10
            PopDec(:,obj.Dr+1:obj.D) = ceil(PopDec(:,obj.Dr+1:obj.D));
            Shift = [84.9982198896252,65.1518724126917,-12.0721324338787,-10.4879930907785,2.44115679333584,-86.8010489485599,-32.6663572362524,-39.7688593885079,39.6033942192842,52.0953666923341;0.295700403183602,-98.2157002092455,2.99785464044295,49.2424046571319,63.1647311444647,58.9902887976831,14.3941945115125,51.2260158116922,-98.0900452571624,-95.0942650668362;-31.6915681968133,32.2014611591747,-19.0988863615379,64.1866943102905,-11.6668902178700,-71.2886718416905,19.6051425823217,95.1571991357974,66.9080536976798,60.2756511740733;-64.0732034818167,-53.5425554157825,-67.9706690877551,5.72899870694501,-31.9233351369172,55.7149529319251,23.8657958886141,-52.9365907627012,5.69740134863865,-59.7486669846864;-72.2319019218781,85.1533419128598,-5.32563835756442,-95.5991580152074,-87.5237259075226,59.1220421008803,92.7302139464097,81.0941149891370,-52.6891911497161,-89.1343681181552;-92.2802828748723,-85.8416257860666,41.2392787621282,66.8644678799206,48.4238884847191,37.2547659052009,0.426090523466456,-67.8046776663765,-22.8678243291060,70.3986282949793;65.8886740496433,-98.5818628935138,88.4942736490112,56.9595417885088,-75.0023263209293,75.7529601948017,19.6791158193047,-13.8984103364095,-21.4237202926693,-55.3637058959058;7.59560099844059,24.5424803096562,-89.4662375604466,-27.3188994352611,49.5994955724583,-10.7221968963058,60.4851509822448,74.2628073475404,-70.5337316276666,17.6184991833435;73.5039428922547,51.0396896977313,12.4275487910654,77.8113112952114,-83.9520099514161,-1.75610154514389,-39.3893388464888,41.1879376001996,8.61422306874928,-72.3864767228047;-30.1210171998700,-48.2837557369765,53.2186285416608,-53.0569035620593,-81.1888375339445,97.9166454959320,-35.6968481889553,53.5651757117067,-89.3348182993055,-10.6519629407752;-69.5729167906914,-39.3206629763659,-99.9970527996788,73.3211550822618,39.7372117112844,-89.3138025732006,72.6194282270002,55.1807145883863,-4.20602263630283,-94.5228460890630;-11.9625362336758,16.2773519598876,-31.6851772090826,97.9637223111696,-4.78306956111021,81.3325527816488,47.3533218287177,11.5814817604198,-19.2679265408155,-44.0369617337245;-22.8356350361413,-43.3687267243422,-57.9408396436701,-12.7639049316843,-30.5938360161677,44.6554803141457,61.1518576620419,30.5732892763004,-64.3011487271127,7.64148103056566;74.7756350460949,-39.0810433737441,73.5375692680319,44.4940826302018,48.7300148888641,-4.99650056338609,60.5942316773070,-78.2931460309363,-90.4486506761752,-55.3767245945693;-22.3883430440565,11.1976463414466,74.1308091793890,-43.3231677148460,64.5545186052088,29.8278262939245,61.9204303170883,64.0579842723666,43.5076987086338,55.5483988126281;-95.6192687962722,45.5187869713389,52.6927003578261,1.79582773666856,-23.3356002637231,98.9528816803476,-80.7363895695647,67.6513950231982,61.3286870397110,90.9667096674686;78.8743182747895,-22.6722859245137,90.6985227042270,-79.5662148399471,1.14233020168638,-75.9822212731678,11.3647321782611,-8.37360075040992,1.96293663689346,42.8465425866048;38.2208457322577,-6.62884726792240,-34.0492903371966,61.3218864468892,70.0137898740918,-33.9661404839487,79.9880792415567,-13.8940403231559,-6.86218330467341,59.0691623023440;34.5645698283316,93.3212714105799,-19.6297634871238,52.9084171856439,-49.4187882222362,-91.2525551302424,85.1090632293418,-29.9889028746243,-52.4056852413614,-53.9832654867887;-10.5852684947323,-46.5451060703918,57.2479232217675,-88.6058319344439,76.7866838563368,-33.9482408351479,74.3176578123425,-36.3834594248221,-90.4196998503751,-76.1877339644525;79.2174043979825,55.7347667999761,49.6934503701313,63.0394701602423,16.8466789483752,33.8482934697661,-38.1643981743471,73.1374900609530,46.4447707730827,-82.6800696374030;23.9651549738155,-54.6305023820929,-29.8677972971444,-90.4458017760413,-87.2384203073345,34.8225571248638,-18.9686154584938,-41.4054570711465,62.0002395527503,63.2192816991645;50.2707898798229,-31.8137880865117,28.8917612592738,0.783754167659907,-65.6799550093798,-74.3589273121180,86.1708505890312,-96.9688527253216,-25.2019250332095,60.4936607732510;-51.2723727596720,-53.9923350331377,83.9843255359117,10.1464387640187,-45.3777841123706,3.17069897333468,-38.7046641915130,84.8278428314932,43.1439177652817,16.4965496132504;-7.25974535704026,6.27021193818489,-61.4830876863542,92.9805283813350,-44.0372570217413,83.4723602515960,40.2057515571182,88.0260308745031,21.6029911564572,-97.5268686637308;18.7106855761876,-33.7128245240741,69.4546246791641,-75.1621471586236,-41.5817016325511,67.7976161751536,25.7460095445283,-43.7691036072370,31.6678723187750,76.9938550876057;29.0609002254316,-79.3829639882779,-48.0285461002658,-20.5387457765201,75.1305876347352,35.8923247923305,64.6023899727910,-72.3984893700086,96.7711899491280,88.7503967846657;76.6382183910147,98.6381286817433,-82.1025796094491,49.1131928815991,-15.7189382419497,-77.6105524196117,88.7886791660966,-49.8724941432693,17.2818838455029,5.06624166147793;87.9255952563655,-10.4581952893901,20.9590740558619,-23.5106281324833,31.1927261443597,-81.7515184623709,-37.1256939485946,-15.0011007770698,-66.0370407300970,-13.7826638949596;89.7673889386147,-97.8830606285241,-98.3359390654628,-55.7656537780690,9.81906189108379,-81.1543841259106,-74.1970744803394,-72.3646645279177,-75.1626068218785,-99.4109292422343;81.4914276377195,44.2882297511697,53.2077616809419,-2.36637922207738,-20.3973219267665,37.4909933435067,12.9050037621948,-38.3404166271062,68.2491429897189,0.633169834002217;-37.9135143556463,96.2965802762580,-18.3217036921641,70.4834228570329,-15.3702472857473,-34.7705156814057,77.5233288401399,-92.0677082584235,63.8248158609056,-69.1113312730417;-73.7568435623297,2.30621318268365,34.3673555526102,46.1073046790212,48.7424040452603,-8.57756058723270,35.0119980746406,-34.9452242226061,-82.7439058611241,-93.8494954403083;54.9251833651433,59.1628995047866,8.96809585847495,85.7972993648479,44.5817732710665,-69.6412544596887,55.5784379465736,85.1122632731501,40.7408604074469,89.6125604305096;25.4647976199815,-70.4585073335798,3.73767166418131,-12.5908200813581,-89.6730541103102,84.1616948149800,81.6784443273085,19.5089592848137,58.9356676624721,-92.6558763245042;-55.1946347007330,-17.5263797129637,75.2037762943167,-1.35984739092694,-29.2156111410566,-81.1295236228274,-98.8638778710947,17.0864148170248,81.9293330983751,48.5994847678373;98.4157592954076,88.1939193371228,37.0311207511533,-54.2126537492163,-82.8429262031804,-83.7623029841611,12.6519260023669,-9.12190515768403,-59.8914546604857,98.8200897607773;15.1738944408925,-2.72090945184556,-71.8250396835742,48.9541797022547,15.4974521022196,-93.5926860937747,-93.0964084321355,5.29211796374464,-50.5498584842600,13.8178108639601;-17.2387239957935,-92.3403597733810,-11.4386802651756,-7.18837643552588,44.9077188867811,7.89450740721669,54.1610643106066,84.3800380047040,-30.0985933145355,89.5510002227839;-58.6912166898148,71.7211407067458,-1.50258589120860,-64.3113397847833,-75.1298867108005,-84.5624997414867,-19.5932746369180,4.41087469481083,-79.4548774652358,-20.1765563276483;40.9793066369878,78.9456908617350,58.9658959648385,-41.0106752949954,-66.9986242456472,-53.4687457468752,88.9325107612577,84.9126809234795,-86.7910493216128,-39.8596971208676;71.7598908128846,15.6702369933470,-66.7980627510693,-92.1885936341223,-29.4834480929064,-61.5956558638128,-11.2868305215745,98.5668503792127,4.68676977358274,-11.4140921593218;-44.8623136544097,-34.5029776117741,73.2067620427568,96.8363069591284,-21.7080866049322,71.8508511819610,-76.8744519112875,28.9776203332550,-66.0718705325693,77.3786337239384;56.3774296464852,51.0865351268384,-93.2920520711300,60.3202109893086,4.87523692234804,-73.8770947044059,81.9902779553592,-53.4670837755721,57.9726186126716,-5.72659488941851;-78.0368085777684,-37.9384162301675,51.8900735761033,-17.0519323561625,38.6713110042082,-82.1201235125030,19.7959497001141,-35.6150511059908,-46.2899846663134,75.9841555137815;22.0425644405711,43.0870957697996,-37.4454276731176,-65.7705079900573,94.9471433442489,-56.4846947280250,-12.8533486947428,-12.9490268622305,94.2360053740759,88.4556750609628;30.6064571477159,-97.5895344203828,28.7147186609567,-49.3450236697679,-86.7529532792436,-27.4949216253260,46.8115194046613,40.1680191242277,-32.9937226730916,0.963196309831290;-64.3809128394514,-51.4868453690986,-40.8656281407092,19.8144558264282,-46.5806333634546,41.7137518445032,-90.6503486157363,-65.0422810222935,-86.0602822577141,67.2237497598983;63.8126303059103,95.5744793946252,70.6744381146548,-43.2978680477755,7.80413796773642,-15.5903991220196,17.7447312186478,39.3708103545488,-9.63500144407585,11.2505534515068;25.1514119370127,72.9055775216902,-50.2846119714061,-69.9265069703303,83.5117615934513,84.6667284753027,87.1242052760213,-52.8403800732938,46.0956616228826,55.6656688522399];
            z(:,1:obj.Dr) = PopDec(:,1:obj.Dr);
            for i = 1 : obj.Dc
                v = Shift(:,obj.Dr+i);
                z(:,obj.Dr+i) = v(PopDec(:,obj.Dr+i));
            end
            z = 6*(z - Shift(1,:))*M;
            for i = 1 : obj.D
                z_(i) = cos(z(i)/sqrt(i));
            end
            PopObj = 1 + sum(z.^2,2)./4000 - prod(z_);   
        end
    end
end