classdef EOPCCV_F21 < PROBLEM
% <2022> <single> <real/label> <expensive/none>
% Expensive optimization problems with continuous and categorical variables

%------------------------------- Reference --------------------------------
% J. Liu, Y. Wang, G. Sun, and T. Pang. Multisurrogate-assisted ant colony
% optimization for expensive optimization problems with continuous and
% categorical variables. IEEE Transactions on Cybernetics, 2022, 52(11):
% 11348-11361.
%------------------------------- Copyright --------------------------------
% Copyright (c) 2026 BIMK Group. You are free to use the PlatEMO for
% research purposes. All publications which use this platform or any code
% in the platform should acknowledge the use of "PlatEMO" and reference "Ye
% Tian, Ran Cheng, Xingyi Zhang, and Yaochu Jin, PlatEMO: A MATLAB platform
% for evolutionary multi-objective optimization [educational forum], IEEE
% Computational Intelligence Magazine, 2017, 12(4): 73-87".
%--------------------------------------------------------------------------

% This function is written by Jiao Liu (email: jiao.liu@ntu.edu.sg)

    properties
        Dr;     % Number of continuous variables
        Dc;     % Number of categorical variables
        len_c;  % length of values of categorical variables
    end
    methods
        %% Default settings of the problem
        function Setting(obj)
            obj.Dr       = 5;
            obj.Dc       = 5;
            obj.M        = 1;
            obj.D        = obj.Dr + obj.Dc; 
            obj.lower    = [-100*ones(1,obj.Dr),ones(1,obj.Dc)];
            obj.upper    = [100*ones(1,obj.Dr),5*ones(1,obj.Dc)];
            obj.len_c    = 5*ones(1,obj.Dc);
            obj.encoding = [zeros(1,obj.Dr),zeros(1,obj.Dc)+3];
        end
        %% Calculate objective values
        function PopObj = CalObj(obj,PopDec)
            load elliptic_M_D10
            PopDec(:,obj.Dr+1:obj.D) = ceil(PopDec(:,obj.Dr+1:obj.D));
            Shift = [7.76241738059824,-51.0984009465649,-95.5110109063394,-68.7425329276135,8.73440143601434,0.0576910196962785,-36.7733718612337,44.3837213180252,99.8130874870004,-12.1792849182758;14.7161080101391,86.6130389485833,10.9166181766828,2.40087735209806,2.02196410548521,-66.8891377077458,11.1348409268775,-84.2635158441106,38.7793613164021,-81.4490040022483;-89.1129245797078,58.0487264835289,-86.3500040429599,-26.8628362043413,1.29742439645348,-24.5505633337013,40.9187113573335,-31.8857240712810,97.4384980911663,94.5925298841210;96.8518118753913,33.3557910238937,6.35522833221683,52.9170677006279,-37.0690504121645,-96.2060966590521,-32.3377481439802,-99.0299037621435,66.3213646187662,-20.7459535102124;7.09387036784229,62.2323770514871,-52.8389715712046,-94.4758094854942,-79.2650508268502,-45.4579464966491,62.3756951463362,23.2041426261584,83.6572190081723,-23.4447352317956;-3.21880979850553,14.6146014521984,30.5275783608328,-19.8521406901865,-13.4856673603932,18.1319396846941,24.4644444716191,13.1995916568475,64.3899271741530,-37.0443288643309;64.8894297900492,55.9678476036576,77.9978357842568,18.5924317107498,91.8743802397755,58.3240763889012,86.2232438750356,-43.5760210705471,6.27142786395885,-33.7723952749322;-81.8593852124818,-21.8172705655724,-14.5498943436412,16.7370476914296,41.5886659819595,71.9284987657441,90.6467714821407,26.1334463135192,4.78934746152369,-78.8024991391516;25.5247278330283,-32.9940478809020,-53.7452868415971,-83.7090682872717,54.6449318321453,-75.8105337869328,-99.4558201911006,-6.67498332941925,42.9977998923338,69.8750155650413;30.8264949912601,-87.1705192692261,93.4961458217045,-33.1470531273804,-53.6205604446659,-22.9861528286351,89.3221015610741,-22.8134248423767,-46.2020624719894,70.8562851782354;-70.4204332076237,66.2901566420700,-44.5913044804910,-64.2618490331072,-1.59316564563490,-81.3224747940659,-83.5772475688072,85.3359811716472,-0.631291699968585,-78.7832404340592;-62.3324368963163,73.6375975912688,3.29782620422692,-31.2173688277635,34.1315630644380,46.1138040817501,56.9107300184240,-86.1353712874152,27.8824492730910,70.7978763757033;-29.5195580345667,50.9494504259116,13.7283345573207,-78.9132554983438,-26.7461106409424,-14.9483679094215,91.7930079839110,60.2399410503195,-63.4723069741841,85.5290368829192;53.0440779116790,-3.03067447671856,-38.7710642643041,-69.7188069079865,57.3317046730586,-76.0971746724683,93.7386496474332,-91.5916583571349,-20.0317397461198,13.8744175611523;2.78813488534153,11.4117678159627,73.1372078092617,-93.0472640988344,-26.4385419954953,31.2744893975164,-89.6598733862593,-39.1842901158949,55.5305916617675,-81.1656480757109;76.3850812811721,1.20401487336272,7.89603960944683,-13.9412784940875,-60.9832106242288,38.2162016570577,42.9359564218088,-8.45508776591872,-67.3308937703034,-99.8373419906345;52.1446659561446,3.13941907236790,-31.1297202796454,-95.6955766818648,49.6809869072583,62.9366294063777,-32.9891631443961,44.7900243228330,20.7933739183243,58.7580630455100;-2.60991243811137,66.6593003962950,-58.4589632198927,53.0073195247462,64.6872928831864,-40.8062457775185,-19.6663320385016,-52.0564593674027,13.9365151531967,57.1911943879969;85.0870485085266,-26.3979017249557,41.0791530751423,-11.8372643625593,-93.6306465488238,3.99176997001183,-97.8144553543378,-96.6448389899937,-61.2857275341631,-24.9783584567707;61.0640052985896,-90.7559314695383,-93.7171839747609,-37.5561927029398,-72.6060975618392,80.5265881980778,-64.6292509474505,-7.82361895182156,-42.9576654589484,55.8109118809687;75.3656455190605,8.86788197632716,99.9180777508620,-12.8017133720839,1.31643165874581,63.5521126992940,-18.7219948227608,-97.9301203323386,-64.8282225603387,-3.89464165303551;-70.0718509232682,90.1926492133713,50.9759904207477,72.3847263973775,-1.04752492543948,43.7865109316403,76.0078760306346,-92.3394478916933,28.8516958923793,-98.7602742984518;22.0159065059376,-80.5640944113092,-4.56673461876423,-60.9739982166916,92.7985290127880,-41.8064866271781,-82.5268044707602,79.2914141489519,98.8136758593672,-48.6975608935704;-91.1593743769467,-21.0650051340089,-55.6885117666001,-81.7172867102423,43.6570095927905,-52.9296643183856,80.5728200658951,-45.7283932336254,-58.2792157196587,-60.5882549857855;41.3928318716911,17.6644486636629,-91.1674439199776,78.1366507035375,-21.0815177322867,66.6995232813133,92.4004415810904,-60.5333452298129,46.7469934042371,-78.3416736250327;15.7864958772419,-57.5487020531444,81.2019223425680,-74.0375645291330,-21.8421544993410,-96.8847649517483,67.6451649484138,-10.2956901975085,1.47296371389064,1.67112991348144;12.4404729200027,-25.1963984071055,-56.3341201085361,16.0478467586828,-80.3476527063969,27.7957558408071,-57.9836053532242,7.78969285413429,60.7497185714167,49.7619448404166;-34.9179178264862,-81.5933998411989,75.1277979905583,-29.6435110117724,-59.8460145179546,-62.9706911623765,54.4193841780406,-38.6144887564199,18.0808931532342,-39.3439522443445;-37.4200894285473,-15.4657824351062,-41.9268753015407,1.77307971854745,16.5207988569790,30.2452598134243,68.7079618261361,75.9375245818980,-83.5513824814555,-51.4572794801792;-72.7811640310827,49.6813749742412,-56.9447523216205,-68.4853822773680,60.1107427576468,26.6237116198847,-76.1217545698321,-89.0966346751121,33.6886471901765,-10.9968184425207;37.7005905483594,-3.67002377993748,-68.6491716625298,42.3329308123623,61.9484024800806,-19.3689802891002,-40.5220077698084,-33.6645641486036,38.8135128860089,-68.9063456392298;-25.2425787943849,-28.3362828056840,-71.7096736575531,3.33429356251618,-76.0948795626030,8.31981761446473,31.6137137171582,91.0896641631435,31.6525054263913,34.1652088621161;-56.7382569177970,25.3108549557968,23.4603162345063,34.3201732703769,62.0506923206946,-24.5489439242510,7.72733817259240,44.3399257459902,70.9620272473492,-38.8106427007786;36.3698382829133,54.6571099490062,-74.8338222110575,93.4200541727511,77.4479727124868,5.52776181754098,-70.3017459533125,94.6238545406037,-56.8479915488283,78.9850364601692;73.6151429260019,-52.3490236224497,1.36646419470910,-50.1672202621622,-36.8309950512139,2.99189046060759,-14.7834915969866,54.4890620837408,-77.6932723911358,92.7764444581884;67.5900255287723,0.725934197721372,-19.8185195920770,-82.0251225374042,12.0954807181436,58.5398962071280,-9.13173353008642,-35.5920806156803,-62.1191454996633,-6.66803234273139;-74.1223871819454,17.2568000908698,-86.4196373815057,58.6069014753427,-0.424866061256552,17.6730658338506,31.5410906395797,61.5615840550094,-88.5850927207555,28.6125966774121;-60.5017593222714,-66.9570286153133,-9.19632629682099,-15.8187238110698,28.6381940652350,-5.65382002910224,-80.4228599247727,77.2969971225716,73.4487353988430,-90.1407074787870;72.5235633123664,-72.5361022384560,-20.5614256527880,23.7027717653141,32.2947304919368,11.9626138927711,-84.3826195624390,20.4886379141203,16.9692699164662,-1.72137145016910;-54.7664675339787,-89.8662441283745,88.8151420045861,67.0065324950930,-66.5045207568891,15.2295003261218,86.5675634324164,-29.4411450433341,-24.5586377735074,79.6925282645349;74.9867854475676,51.6104127287782,-56.3210039070310,35.2392141265621,-28.9573493119083,-45.1599523357881,-4.09568667886333,-14.7223256742077,-24.2014438616968,-22.2166023641848;49.2215460372204,67.7028196896710,-2.91294843050243,37.8378021604888,21.8260322809405,-93.2610430045985,-32.0272478794230,-61.8466868227784,-61.1915491918488,75.7899671814153;-69.8748541277408,29.3897596167559,-99.5576242748508,-51.5192721554232,77.1176658801107,-29.3240648330241,-98.3172099867582,-68.8257989132869,-96.1006953517019,0.596704091028627;-84.2523094445832,45.6972797675181,61.5563208193721,-99.2505428434148,77.2799820964300,98.6765861680844,74.3258401568052,98.1604173161897,-7.85676891021269,-78.2759694800943;-18.0594853770780,-30.7850547849982,74.2593100463937,62.4853900895492,1.18532286793534,87.1413129746005,-9.64845106439059,-48.7860136476741,6.31873326133039,-19.8153560597621;98.5985047906120,57.6305291574869,-61.3997644619462,-65.8885117454113,-26.2395605808305,-99.3941466046532,-84.3957555540118,-53.2453684624432,-58.3860441444481,11.5990438855652;-40.6851104758286,-75.8545601231180,-26.3176399401235,-87.9576384470397,79.1608761388864,29.6803832394829,-74.4992973429951,86.9575560892631,-99.8837333794841,10.5747927822256;26.9255746573612,97.3185108173065,-64.9263173178460,-3.20644678707980,86.4233098602797,-49.4268753791773,-28.1300435286217,33.2976670416909,-97.2902876386750,-34.5309544479206;34.0542052591277,-13.6518147028922,-93.1199191152379,-20.3585618661712,-66.9352400271443,-92.2481124374349,13.9994394471852,99.5382033961086,62.2918212157059,43.5876492503475;45.4684643173555,-3.06395799973787,54.9697024771852,5.34116214130360,-21.6840854296806,-75.0438238450259,-32.1976862839716,52.0744593993742,-34.9924479118267,-85.4799611196454]; 
            z(:,1:obj.Dr) = PopDec(:,1:obj.Dr);
            for i = 1 : obj.Dc
                v = Shift(:,obj.Dr+i);
                z(:,obj.Dr+i) = v(PopDec(:,obj.Dr+i));
            end
            z = (z - Shift(1,:))*M;
            PopObj = sum((z.^2)')';
        end
    end
end